---
title: rclone
date: 2025-06-18 15:02:27
categories:
tags:
---
# 安裝
依照官網下在binary檔進行安裝，apt下載的版本是比較舊的

# 設定
依照rclone config的指示進行設定
1. 申請google OAuth client id，以便提高效能，使用 rclone config的時候會被詢問Option client_id.和Option client_secret.的時候可以填入

https://rclone.org/drive/#making-your-own-client-id


### 如果需要使用服務帳號

填入 JSON 金鑰檔案的完整路徑,例如:
```
/home/username/.config/rclone/service-account.json
```

或使用 `~` 代表家目錄:
```
~/rclone-service-account.json
```

jenhaoyang: 從哪裡取得service-account.json

GitHub Copilot: # 如何取得 Service Account JSON 金鑰檔案

Service Account JSON 金鑰檔案需要從 **Google Cloud Platform (GCP)** 建立和下載。以下是完整步驟:

## 建立service account步驟

### 1. 前往 Google Cloud Console
訪問 https://console.cloud.google.com/

### 2. 建立或選擇專案
- 如果沒有專案,點擊「建立專案」
- 如果已有專案,從頂部選單選擇該專案

### 3. 啟用 Google Drive API
- 在左側選單選擇「API 和服務」>「程式庫」
- 搜尋「Google Drive API」
- 點擊並啟用它

### 4. 建立服務帳號
- 前往「API 和服務」>「憑證」
- 點擊「建立憑證」>「服務帳號」
- 輸入服務帳號名稱(例如: `rclone-service`)
- 點擊「建立並繼續」
- (選用)授予角色,一般可跳過
- 點擊「完成」

### 5. 建立金鑰
- 在服務帳號列表中,找到剛建立的帳號
- 點擊該服務帳號
- 切換到「金鑰」標籤
- 點擊「新增金鑰」>「建立新的金鑰」
- 選擇「JSON」格式
- 點擊「建立」

### 6. 下載檔案
- JSON 金鑰檔案會自動下載到你的電腦
- 檔名類似: `project-name-xxxxx.json`

### 7. 授予權限
**重要**: 服務帳號預設無法存取你的 Google Drive,需要:
- 找到 JSON 檔案中的 `client_email` 欄位(格式: `xxx@xxx.iam.gserviceaccount.com`)
- 在 Google Drive 中,將要同步的資料夾分享給這個 email 地址

## 注意事項

⚠️ **安全提醒**:
- JSON 金鑰檔案包含敏感資訊,請妥善保管
- 不要上傳到 Git 或公開位置
- 建議設定檔案權限為 `600`(僅擁有者可讀寫)

```bash
chmod 600 ~/service-account.json
```


# 測試rclone連線
如果使用service account，必須把資料夾分享給service account的gmail帳號，因為他不能直接存取我們的google drive。另外也檢查的時候也必須要指定顯示與我們共用的資料夾，不然會看不到東西。

```
rclone ls google-remote: --drive-shared-with-me
```

https://ivonblog.com/posts/rclone-linux/


# rclone mount
1. 記得加上`--daemon`啟用背景執行
2. `--drive-shared-with-me`也記得要加
On Linux/macOS/FreeBSD start the mount like this, where /path/to/local/mount is an empty existing directory:
```
rclone mount remote:path/to/files /path/to/local/mount --drive-shared-with-me --daemon
```

# reclone設為service


# 啟動gui
 rclone rcd --rc-web-gui  --rc-web-gui-update  --rc-no-auth 


rclone的服務設定檔放在~/.config/systemd/user/底下
 
# 參考
https://rclone.org/commands/rclone_rcd/
https://gist.github.com/kabili207/2cd2d637e5c7617411a666d8d7e97101